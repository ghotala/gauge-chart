function GaugeChart(a){"use strict";function b(a,b){return b?function(){return arguments.length>0?(A[a]=b(arguments[0]),y):A[a]}:function(){return arguments.length>0?(A[a]=arguments[0],y):A[a]}}function c(a){var b="Data is not in the correct format",c=a.filter(function(a){return"number"==typeof a});if(c>0&&c<a.length)throw b;for(var d=0,e=a.length;e>d;d++){var f=a[d];if("number"!=typeof f&&("number"!=typeof f.id||"number"!=typeof f.value||-1===["undefined","number"].indexOf(typeof f.weight)))throw b}}function d(a){if(c(a),a.filter(function(a){return"number"==typeof a}).length>0)for(var b=0,d=a.length;d>b;b++)a[b]={id:b+1,value:a[b]};return a}function e(a){return function(b){return"boolean"!=typeof b?a:b}}function f(a,b,c){return function(d){var e=parseInt(d);return isNaN(e)||!b&&0>e||!c&&0===e?a:e}}function g(a){var b=a.weight;return"undefined"==typeof b?1:Math.max(b,0)}function h(){for(var a=A.data,b=0,c=0,d=a.length;d>c;c++)b+=g(a[c]);return b}function i(){var a=A.data,b=0,c=h(a);if(c>0)for(var d=0,e=a.length;e>d;d++){var f=a[d],i=f.value,j=g(f);b+=i*j/c}return b}function j(a){var b=(A.arcThickness+A.arcSeparation)/A.radius;return 1-a*b}function k(a){return A.arcThickness/j(a)}function l(a){return Math.ceil(B.arcLength*a.value/(100*(A.renderHalfCircle?2:1)))}function m(a){var b=l(a);return b+" "+Math.ceil(B.arcLength-b)}function n(a){return function(b){b.attrTween("transform",function(b,c){var d=parseFloat(this.getAttribute("transform").replace(/scale\(/g,""));if("in"===a)var e=d3.interpolate(d,j(c));else var e=d3.interpolate(d,0);return function(a){var b=e(a).toFixed(3);return"scale("+b+")"}}).attrTween("stroke-width",function(b,c){var d=parseFloat(this.getAttribute("stroke-width"));if("in"===a)var e=d3.interpolate(d,k(c));else var e=d3.interpolate(d,d);return function(a){var b=e(a).toFixed(0);return b+"px"}}).attrTween("stroke-dasharray",function(b,c){var d=parseFloat(this.getAttribute("stroke-dasharray"));if("in"===a)var e=d3.interpolate(d,l(b));else var e=d3.interpolate(d,0);return function(a){var b=e(a).toFixed(0);return b+" "+Math.ceil(B.arcLength-b)}})}}function o(a){var b=parseFloat(this.getAttribute("data-current-value")),c=d3.interpolate(b,i(A.data)),d=this;return function(a){var e=c(a).toFixed(1);b!==e&&(d.setAttribute("data-current-value",e),d3.select(this).text(e+"%"))}}function p(a){C.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),C.svg.setAttribute("class","gh-gauge-chart"),a.appendChild(C.svg),C.mainLayer=document.createElementNS("http://www.w3.org/2000/svg","g"),C.mainLayer.setAttribute("class","gh-gauge-chart-main-layer"),C.svg.appendChild(C.mainLayer),C.mainLayerOverlay=document.createElementNS("http://www.w3.org/2000/svg","rect"),C.mainLayerOverlay.setAttribute("class","gh-gauge-chart-overlay gh-gauge-chart-main-layer-overlay"),C.mainLayer.appendChild(C.mainLayerOverlay),C.seriesLayer=document.createElementNS("http://www.w3.org/2000/svg","g"),C.seriesLayer.setAttribute("class","gh-gauge-chart-series-layer"),C.mainLayer.appendChild(C.seriesLayer),C.$seriesLayer=d3.select(C.seriesLayer),C.textLayer=document.createElementNS("http://www.w3.org/2000/svg","g"),C.textLayer.setAttribute("class","gh-gauge-chart-text-layer"),C.mainLayer.appendChild(C.textLayer),C.$textLayer=d3.select(C.textLayer)}function q(){if(!("transform"in C.svg)){var a=getComputedStyle(C.mainLayer);C.mainLayer.setAttribute("transform",a.msTransform);var b=getComputedStyle(C.mainLayerOverlay);C.mainLayerOverlay.setAttribute("transform",b.msTransform);var c=getComputedStyle(C.seriesLayer);C.seriesLayer.setAttribute("transform",c.msTransform);var d=getComputedStyle(C.textLayer);C.textLayer.setAttribute("transform",d.msTransform)}}function r(){B.arcLength||(B.arcLength=2*Math.PI*A.radius)}function s(a,b,c){var d="series"===a?A.data:A.data.map(function(a){return{id:a.id,value:100}}),e=C.$seriesLayer,f=e.selectAll("circle.gh-gauge-chart-"+a).data(d,function(a){return a.id});return A.animate?u(f.exit(),n("out"),!0):f.exit().remove(),f.enter().append("circle").attr("r",A.radius).attr("stroke-width",function(a,b){return k(b)}).attr("stroke-dasharray",function(a,c){return b?m(a):"0 "+Math.ceil(B.arcLength)}).attr("transform",function(a,b){return"scale("+(c?j(b):0)+")"}),f.attr("class",function(b,c){return"gh-gauge-chart-"+a+" gh-gauge-chart-"+a+"-"+(c+1)}),f}function t(a){var b=C.$textLayer,c=b.selectAll("text.gh-gauge-chart-main-value").data([0]);return c.enter().append("text").attr("data-current-value",a).attr("class","gh-gauge-chart-main-value"),c.text(a.toFixed(1)+"%"),c}function u(a,b,c){var d=a.transition().duration(A.animationDuration).delay(A.animationDelay);c&&d.remove(),d.call(b)}function v(a,b){a.transition().duration(A.animationDuration).delay(A.animationDelay).tween("text",b)}function w(){if(!z){var a=document.createDocumentFragment();p(a),A.target.appendChild(a),q(),r()}return x(),z=!0,y}function x(){A.animate?(D.$background=s("background",!0,!1),D.$series=s("series",!1,!1),D.$text=t(z?parseFloat(D.$text.attr("data-current-value")):0),u(D.$background,n("in"),!1),u(D.$series,n("in"),!1),v(D.$text,o)):(D.$background=s("background",!0,!0),D.$series=s("series",!0,!0),D.$text=t(i(A.data)))}var y={},z=!1,A={target:a,data:[],renderHalfCircle:!1,radius:75,arcThickness:9,arcSeparation:1,startAngle:-Math.PI/2,animate:!1,animationDelay:0,animationDuration:2e3};y.data=b("data",d),y.renderHalfCircle=b("renderHalfCircle",e(!1)),y.radius=b("radius",f(75,!1,!1)),y.arcThickness=b("arcThickness",f(9,!1,!1)),y.arcSeparation=b("arcSeparation",f(1,!1,!0)),y.animate=b("animate",e(!0)),y.animationDelay=b("animationDelay",f(0,!1,!0)),y.animationDuration=b("animationDuration",f(2e3,!1,!0));var B={},C={},D={};return y.render=w,y}
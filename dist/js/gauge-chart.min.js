function GaugeChart(a){"use strict";function b(a,b){return b?function(){return arguments.length>0?(C[a]=b(arguments[0]),A):C[a]}:function(){return arguments.length>0?(C[a]=arguments[0],A):C[a]}}function c(a){var b="Data is not in the correct format",c=a.filter(function(a){return"number"==typeof a});if(c>0&&c<a.length)throw b;for(var d=0,e=a.length;e>d;d++){var f=a[d];if("number"!=typeof f&&("number"!=typeof f.id||"number"!=typeof f.value||-1===["undefined","number"].indexOf(typeof f.weight)))throw b}}function d(a){if(c(a),a.filter(function(a){return"number"==typeof a}).length>0)for(var b=0,d=a.length;d>b;b++)a[b]={id:b+1,value:a[b]};return a}function e(a){return function(b){return"boolean"!=typeof b?a:b}}function f(a,b,c){return function(d){var e=parseInt(d);return isNaN(e)||!b&&0>e||!c&&0===e?a:e}}function g(a){return JSON.parse(JSON.stringify(a))}function h(a){var b=a.weight;return"undefined"==typeof b?1:Math.max(b,0)}function i(){for(var a=C.data,b=0,c=0,d=a.length;d>c;c++)b+=h(a[c]);return b}function j(){var a=C.data,b=0,c=i(a);if(c>0)for(var d=0,e=a.length;e>d;d++){var f=a[d],g=f.value,j=h(f);b+=g*j/c}return b}function k(a,b){return D.outerRadius-b*(C.seriesThickness+C.seriesSeparation)}function l(a,b){return k(a,b)-C.seriesThickness}function m(a){var b=C.renderHalfCircle?.5:1;return 2*Math.PI*a.value*b/100+C.startAngle}function n(){return m({value:100})}function o(a){return d3.svg.arc().innerRadius(l).outerRadius(k).startAngle(C.startAngle).endAngle("series"===a?m:n)}function p(a,b){return function(c){c.attrTween("d",function(c,d){if("in"===b)var e=d3.interpolate(this.getAttribute("data-current-value"),c.value),f=d3.interpolate(this.getAttribute("data-current-index"),d);else var e=d3.interpolate(this.getAttribute("data-current-value"),0),f=d3.interpolate(this.getAttribute("data-current-index"),D.seriesToFit);var h=o(a),i=this;return function(a){var b=e(a),d=f(a),j=g(c);return j.value=b,i.setAttribute("data-current-value",b),i.setAttribute("data-current-index",d),h(j,d)}})}}function q(a){var b=d3.interpolate(this.getAttribute("data-current-value"),j(C.data)),c=this;return function(a){var d=b(a);c.setAttribute("data-current-value",d),d3.select(this).text(d.toFixed(1)+"%")}}function r(a){E.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),E.svg.setAttribute("class","gh-gauge-chart"),a.appendChild(E.svg),E.mainLayer=document.createElementNS("http://www.w3.org/2000/svg","g"),E.mainLayer.setAttribute("class","gh-gauge-chart-main-layer"),E.svg.appendChild(E.mainLayer),E.mainLayerOverlay=document.createElementNS("http://www.w3.org/2000/svg","rect"),E.mainLayerOverlay.setAttribute("class","gh-gauge-chart-overlay gh-gauge-chart-main-layer-overlay"),E.mainLayer.appendChild(E.mainLayerOverlay),E.seriesLayer=document.createElementNS("http://www.w3.org/2000/svg","g"),E.seriesLayer.setAttribute("class","gh-gauge-chart-series-layer"),E.mainLayer.appendChild(E.seriesLayer),E.$seriesLayer=d3.select(E.seriesLayer),E.textLayer=document.createElementNS("http://www.w3.org/2000/svg","g"),E.textLayer.setAttribute("class","gh-gauge-chart-text-layer"),E.mainLayer.appendChild(E.textLayer),E.$textLayer=d3.select(E.textLayer)}function s(){if(!("transform"in E.svg)){getComputedStyle(E.mainLayer)}}function t(){var a=E.svg;D.outerSize=Math.min(a.clientWidth,a.clientHeight),D.outerRadius=D.outerSize/2,D.seriesToFit=Math.ceil(D.outerRadius/(C.seriesThickness+C.seriesSeparation))}function u(a,b,c){var d=C.data,e=E.$seriesLayer,f=o(a),g=e.selectAll("path.gh-gauge-chart-"+a).data(d,function(a){return a.id});return C.animate?w(g.exit(),p(a,"out"),!0):g.exit().remove(),g.enter().append("path").attr("data-current-value",function(a){return b?a.value:0}).attr("data-current-index",function(a,b){return c?b:D.seriesToFit}),g.attr("class",function(b,c){return"gh-gauge-chart-"+a+" gh-gauge-chart-"+a+"-"+(c+1)}),b&&c&&g.attr("d",f),g}function v(a){var b=E.$textLayer,c=b.selectAll("text.gh-gauge-chart-main-value").data([0]);return c.enter().append("text").attr("data-current-value",a).attr("class","gh-gauge-chart-main-value"),c.text(a.toFixed(1)+"%"),c}function w(a,b,c){var d=a.transition().duration(C.animationDuration).delay(C.animationDelay);c&&d.remove(),d.call(b)}function x(a,b){a.transition().duration(C.animationDuration).delay(C.animationDelay).tween("text",b)}function y(){if(!B){var a=document.createDocumentFragment();r(a),C.target.appendChild(a),s(),t()}return z(),B=!0,A}function z(){C.animate?(F.$background=u("background",!0,!1),F.$series=u("series",!1,!1),F.$text=v(B?parseFloat(F.$text.attr("data-current-value")):0),w(F.$background,p("background","in"),!1),w(F.$series,p("series","in"),!1),x(F.$text,q)):(F.$background=u("background",!0,!0),F.$series=u("series",!0,!0),F.$text=v(j(C.data)))}var A={},B=!1,C={target:a,data:[],renderHalfCircle:!1,seriesThickness:9,seriesSeparation:1,startAngle:-Math.PI/2,animate:!1,animationDelay:0,animationDuration:2e3};A.data=b("data",d),A.renderHalfCircle=b("renderHalfCircle",e(!1)),A.seriesThickness=b("seriesThickness",f(9,!1,!1)),A.seriesSeparation=b("seriesSeparation",f(1,!1,!0)),A.animate=b("animate",e(!0)),A.animationDelay=b("animationDelay",f(0,!1,!0)),A.animationDuration=b("animationDuration",f(2e3,!1,!0));var D={},E={},F={};return A.render=y,A}